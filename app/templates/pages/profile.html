{% extends 'base.html' %}

{% from 'macros/sidebar_link.html' import sidebar_link %}
{% from 'partials/bottom_sheet.html' import bottom_sheet %}

{% block sidebar %}

    {% include 'partials/sidebar.html' %}

{% endblock %}


{% macro profile_info(title, value, svg) %}
    <div class="flex flex-col gap-1 w-full text-fdt-grey-darker font-montserrat">
        <p class="font-medium">
            {{ title }}
        </p>
        <span class="flex justify-between items-center p-2  w-full border-1 rounded-md">
            {{ value }}
            <img src="{{ url_for('static', filename=svg) }}" alt="kingsklass logo" />
        </span>
    </div>
{% endmacro %}


{% block content %}
    <div x-data="{mOpen: false}"
         x-bind:class="{ 'bg-gray-500': mOpen }"
         class="absolute left-0 right-0 top-16 gap-y-6 flex flex-col pt-4  bg-opacity-30 transition duration-300 ease-in-out ">
        <header class="relative mx-4 flex justify-center items-center">

            <span x-data
                  x-on:click="window.history.back()"
                  class="left-0 top-0 absolute flex items-center justify-center text-fdt-grey-dark">
                <svg class="w-6 h-6 text-black"
                     aria-hidden="true"
                     xmlns="http://www.w3.org/2000/svg"
                     width="34"
                     height="34"
                     fill="none"
                     viewBox="0 0 24 24">
                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M5 12h14M5 12l4-4m-4 4 4 4" />
                </svg>
            </span>
            <img src="https://images.unsplash.com/photo-1494790108377-be9c29b29330?q=80&w=1000&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8dXNlciUyMHByb2ZpbGV8ZW58MHx8MHx8fDA%3D"
                 alt=""
                 class="w-20 h-20 shadow object-fill rounded-full"
                 width="80px"
                 height="80px" />

            <span x-data="{ isOpen: false }"
                  x-on:click="isOpen = !isOpen;"
                  class="right-0 gap-x-2 bottom-0 absolute flex items-center justify-center text-fdt-grey-dark">
                <span x-text="!isOpen ? 'Edit': 'Cancel'"></span>
                <svg xmlns="http://www.w3.org/2000/svg"
                     x-show="!isOpen"
                     width="32"
                     height="32"
                     hx-get="/user/edit_profile"
                     hx-target="#profile"
                     viewBox="0 0 18 18"
                     fill="none">
                    <path d="M15.1123 5.95527L6.20978 14.8578C5.41478 15.6603 3.03728 16.0277 2.45978 15.4952C1.88228 14.9627 2.30227 12.5853 3.09727 11.7828L11.9998 2.88029C12.4109 2.4888 12.9587 2.27352 13.5263 2.28044C14.0939 2.28736 14.6363 2.51593 15.0377 2.91733C15.4391 3.31872 15.6677 3.86115 15.6746 4.42877C15.6816 4.99639 15.4663 5.54421 15.0748 5.95527H15.1123Z" stroke="#6E6E6E" stroke-linecap="round" stroke-linejoin="round" />
                    <path d="M15.75 15.75H9" stroke="#6E6E6E" stroke-linecap="round" stroke-linejoin="round" />
                </svg>

                <a href="/user/me">
                    <svg class="w-[32px] h-[32px] text-gray-800 dark:text-white"
                         aria-hidden="true"
                         x-show="isOpen"
                         xmlns="http://www.w3.org/2000/svg"
                         width="24"
                         height="24"
                         fill="none"
                         viewBox="0 0 24 24">
                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="m15 9-6 6m0-6 6 6m6-3a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
                    </svg>
                </a>
            </span>
        </header>
        <form novalidate
              id="profile"
              class="font-montserrat p-4 gap-y-4 shadow rounded-lg mx-4 flex flex-col  bg-white">
            {{ profile_info('Full name', current_user.first_name + ' ' + current_user.last_name, 'icons/user.svg') }}
            {{ profile_info('Username', current_user.username, 'icons/user.svg') }}
            {{ profile_info('Email', current_user.email, 'icons/email.svg') }}
            {{ profile_info('Phone', '+234 8130 199 31', 'icons/phone.svg') }}
        </form>

        <div x-on:click="mOpen = !mOpen"
             hx-get="/user/measurements"
             hx-target="#user-measurements"
             class="flex justify-between items-center font-montserrat text-fdt-grey-darker font-medium p-5 gap-y-4 shadow rounded-lg mx-4  bg-white">
            <span> Measurements</span>
            <svg class="w-[32px] h-[32px] text-gray-800"
                 aria-hidden="true"
                 xmlns="http://www.w3.org/2000/svg"
                 width="24"
                 height="24"
                 fill="none"
                 viewBox="0 0 24 24">
                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 6h8m-8 6h8m-8 6h8M4 16a2 2 0 1 1 3.321 1.5L4 20h5M4 5l2-1v6m-2 0h4" />
            </svg>

        </div>

        {% set m_body %}
            <div id="user-measurements">
            </div>
        {% endset %}

        {{ bottom_sheet(title="Measurements", m_body=m_body) }}

    </div>
{% endblock %}
